<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Cognitive Reframe Tool</title>
    <link rel="stylesheet" href="assets/styles.css">
    <meta name="description" content="A tool to help identify and reframe Negative Automatic Thoughts (NATs) using AI-powered Cognitive Behavioral Therapy (CBT) techniques.">
    <!-- Possible placeholder for favicon in assets/icons/ -->
    <!-- <link rel="icon" href="assets/icons/favicon.ico" type="image/x-icon"> -->
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <h1>MindShift AI</h1>
            <p class="subtitle">Challenge your negative thoughts with AI-powered insights.</p>
        </header>

        <main class="app-main">
            <section id="thoughtInputSection" aria-labelledby="thoughtInputHeading">
                <h2 id="thoughtInputHeading">1. What's on your mind?</h2>
                <form id="natForm">
                    <div class="form-group">
                        <label for="natText">Describe your negative thought:</label>
                        <textarea id="natText" name="natText" rows="5" placeholder="e.g., I always mess things up..." required></textarea>
                        <small class="char-counter" id="charCounter">0 / 500</small>
                    </div>
                    <button type="submit" id="submitNatButton" class="button-primary">
                        <span class="button-text">Reframe My Thought</span>
                        <span class="spinner" id="submitSpinner" style="display: none;"></span>
                    </button>
                </form>
            </section>

            <section id="aiResponseSection" aria-live="polite" style="display: none;">
                <h2>2. AI Analysis & Reframing</h2>
                <div id="loadingIndicator" class="loading-indicator" style="display: none;">
                    <p>Analyzing your thought...</p>
                    <div class="spinner-dots">
                        <div></div><div></div><div></div><div></div>
                    </div>
                </div>

                <div id="analysisResults">
                    <div class="response-block distortions-block">
                        <h3><img src="assets/icons/brain-icon.svg" alt="" class="icon">Identified Cognitive Distortions:</h3>
                        <ul id="distortionsList"></ul>
                        <p id="noDistortions" style="display:none;">No specific distortions identified, or this may be a general negative feeling.</p>
                    </div>

                    <div class="response-block alternative-block">
                        <h3><img src="assets/icons/lightbulb-icon.svg" alt="" class="icon">Rational Alternative Thought:</h3>
                        <p id="alternativeText"></p>
                    </div>

                    <div class="response-block encouragement-block">
                        <h3><img src="assets/icons/heart-icon.svg" alt="" class="icon">Encouragement:</h3>
                        <p id="encouragementText"></p>
                    </div>
                </div>
            </section>

            <section id="believabilitySection" style="display: none;" aria-labelledby="believabilityHeading">
                <h2 id="believabilityHeading">3. How believable is this new thought?</h2>
                <div class="form-group">
                    <label for="beliefRating">Rate from 1 (Not at all) to 10 (Completely):</label>
                    <input type="range" id="beliefRating" name="beliefRating" min="1" max="10" value="5" class="slider">
                    <span id="beliefRatingValue" class="slider-value">5</span>
                </div>
                <button id="saveJournalButton" class="button-secondary" style="display: none;">Save to Journal</button>
            </section>

            <div id="errorMessage" class="error-message" role="alert" style="display: none;"></div>
        </main>

        <aside class="developer-tools" id="devToolsPanel" style="display: none;">
            <h3>Developer Tools</h3>
            <div class="dev-toggle">
                <label for="mockApiToggle">Enable Mock API:</label>
                <input type="checkbox" id="mockApiToggle">
            </div>
            <div class="status-indicator" id="statusIndicator">
                Status: <span id="apiStatusText">Idle</span>
            </div>
            <h4>Raw JSON Response:</h4>
            <pre id="rawJsonResponse" class="json-output"></pre>
        </aside>

        <footer class="app-footer">
            <p>Disclaimer: This tool is for informational and self-help purposes only and does not constitute medical advice. If you are in distress, please consult a qualified mental health professional.</p>
            <p><button id="toggleDevToolsButton" class="button-link">Toggle Developer Tools</button></p>
        </footer>
    </div>

    <script src="scripts/main.js" type="module"></script>
</body>
</html>
